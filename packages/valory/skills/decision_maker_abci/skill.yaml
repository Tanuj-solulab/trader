name: decision_maker_abci
author: valory
version: 0.1.0
type: skill
description: This skill is responsible for the decision making and placing the bets.
  It samples a market based on its liquidity, it sends a request to a mech to decide
  what to vote for, it receives the response from the mech, it decides whether voting
  is profitable or not, and ultimately, it either bets or blacklists the market.
license: Apache-2.0
aea_version: '>=1.0.0, <2.0.0'
fingerprint:
  README.md: bafybeihax2qca6wtog4v2i7athfyfgpdc57gpbmtavphnrsiwotbst4jku
  __init__.py: bafybeiakm6vju46yspbdwtjbuol7vl4525m3fcccftnz24ziukjf6wt36u
  behaviours/__init__.py: bafybeidkdkat5shqqv4vsfwt5llcbior57ymz7hqmoxoaeqaycbydhmf44
  behaviours/base.py: bafybeic2y5djk7mwp2pbh2pr4cvqqkdsyn3joabhcj4yjkqs72f7h4gm2m
  behaviours/bet_placement.py: bafybeiekwmdh3ph5loldngwycixfpnrzk6ufc2ivxhbmpjpwm2avmbd33y
  behaviours/blacklisting.py: bafybeibrw3pyham4ee6adkl65ncuhtlkgejmt6yg6s7mz7l2xkoymkmd2m
  behaviours/check_benchmarking.py: bafybeierg3w33otfseexdefprdl7mihj4vwntjkx5hrh4pddr27ykg2r3e
  behaviours/claim_subscription.py: bafybeigekpdac52loenrul2usanm4knulcaxtq7sgbbslhan3kigwf7iim
  behaviours/decision_receive.py: bafybeicc5zjamwfd6vhg7kloku5zso2fcpjtyh2f6lejdg2od6ihfksxfy
  behaviours/decision_request.py: bafybeigx26hzvoxgp5juwfjggjljbbiorav5i5m237zu2vriwceyx6ywpe
  behaviours/handle_failed_tx.py: bafybeichsgkwff73hmkes5dpaeo3tq6l5qjqgrl3inb6nl4itaowj7zinu
  behaviours/order_subscription.py: bafybeifoxxzm23lexaculdxy5lkt5w3rwvzpdtrn4eb6zw372evnpdjbt4
  behaviours/randomness.py: bafybeibfj7sf66p5dinsry7khd2jmdxcfd2vdnadxpd34gnzx2jbbsmamm
  behaviours/reedem.py: bafybeigdfewlnmimczduw2r72y553vqq3ounqh33jqycpbshmgxthht4lu
  behaviours/round_behaviour.py: bafybeiecm7mc7etoqbpifmsv64ilympb2dx7cxsvngpspoicngpncnbltm
  behaviours/sampling.py: bafybeicg5gdcovyiow5ho74bdwgcyfxtgqhsvqjppz3zcuk525nshytyq4
  behaviours/storage_manager.py: bafybeihrk4covgazkpt7r5zxct254ncolhryjf5ogivwpx3rc333au6mc4
  behaviours/tool_selection.py: bafybeiedptj4lfovylpxhf5uuzwyz2rm7jc5uc4cc4pg4ncalpdakregxm
  dialogues.py: bafybeidgpuex2hiv7ccfumz46xbyh7lql7bsvq3vdtn75bl4k4frq4itge
  fsm_specification.yaml: bafybeibkym7rrp2ujactwymp5s3xbk6p46gdc3ea4hbvn7i6gqsmop6ycm
  handlers.py: bafybeidwpxku4q3mdqtjxe4bys5ehdkd246p6gfdqaz2admfosloujv5pi
  io_/__init__.py: bafybeidqnemziydeeozd6zdwilsuv3cnky4fviiltymbysgpilsitve5pq
  io_/loader.py: bafybeigtiwkyowksbhd5nywy4n33y5ivxmqfyodxn2zpimmyk5ki2sjjtu
  models.py: bafybeidcpx7n4jf5mr5tcd7jtuoqze6qttbpch3x4rudez5i7ret3ismpa
  payloads.py: bafybeib3gmnl2v2jazak3dul5bb3qg6gz235xcwyck5jciih6q2evb5dai
  policy.py: bafybeigolpbsiztgkfpvzvlpmrml2fh4r4ydyiqdokd7pb3kqeyzy4jdra
  redeem_info.py: bafybeigzr7usnwu5q2fly6bls2gyanuwjmfepnlklry62nqz3okhhlxfhy
  rounds.py: bafybeifypwxkgzf6gngi5r3hsorfjkatq3cirvhew27zwgvpg2ap4o7ci4
  states/__init__.py: bafybeihfvpau66wi3ixol57nmag6wyduwvehbqx3z637viyuhni3rg33u4
  states/base.py: bafybeifsapbitruyxxq5gdrkmhqy3unvn7asvv3yjsr2oiphyeqcizgkjm
  states/bet_placement.py: bafybeihn7fjzxngz55mwidvy446e6bk63kg5oo2lwri4nim7aup4c3yebe
  states/blacklisting.py: bafybeia5p7tqb2azi5h7g7qt7ttumpumgtgojalwus2xchca2iycdm4vl4
  states/check_benchmarking.py: bafybeielfa2uqi5z3t2mjlr64mbo45lg2kykmgem67rhpe7qvvbiclckpq
  states/claim_subscription.py: bafybeiceu2idmb72qezfhu556jpqjukt52dypzn4xpwrhjlczm5ne66wvu
  states/decision_receive.py: bafybeidhooxoeeikg3ajxmbr2xm3zyrhwllefh7ueagi5o2cvyzopamjmi
  states/decision_request.py: bafybeiegvawo6nmjtk2x5zi7vmzjatd4mjiccawqrr6wqkuwnihuabc7c4
  states/final_states.py: bafybeidfee7ytvq6lpdnrlzt27n42akenrfntsrmf22za4jhat3e5bbl2i
  states/handle_failed_tx.py: bafybeidhtes5hftgpsfzltdgv7znnffzrtfei433qe3zpeaf7hdvwuvyhe
  states/order_subscription.py: bafybeieont7d6bjjdo5lp543x4of6kk3yanswauc4yknpcvnzhcvil7nvu
  states/randomness.py: bafybeigp32coh67ezm66xhleobosgmpejoqc5jk4dc5zrkdc6plcavse5m
  states/redeem.py: bafybeiauotsntoj5yynw3hmd2r2vqhslaaygj2p4wopj3aasij3cyvhoiq
  states/sampling.py: bafybeig4qnq4hocqfgzkcnbht2g77qcf7qyj4i4t4ytarkikcjys6z2xta
  states/tool_selection.py: bafybeic2y5jo7iw6fkdqyedm3ba5wuvbclkh3xrx3fvw5vmqbjejha6oki
  tests/__init__.py: bafybeigm2dzzbye7zopamh32lom3hi76n7izbuhfmgqxbj2n2h7kdh7h7u
  tests/behaviours/__init__.py: bafybeifwb5e4sf42cwjs52dubkfdvtbe7qolxltcynkl4xef6i2gbllofy
  tests/behaviours/data/.gitkeep: bafybeifmzvsmm7sfvwpny4zd4dqph75gribk652w57ihlnoygbl63jcfj4
  tests/behaviours/dummy_strategy/__init__.py: bafybeifltqayw5gzofgagkyngglq7hkrdeoshl7gwzkgtcfvtfnmt3logy
  tests/behaviours/dummy_strategy/dummy_strategy.py: bafybeicciqxpqortjc6m7ty5j2j23m6ee4hofvulb4a2i55euh5zm6wrua
  tests/behaviours/test_base.py: bafybeiayb3wvxtbj2jbmkig24go77k6ehpkzckhli2nf6q34mtqhy66ebq
  tests/conftest.py: bafybeihzzienlmvuew6hyza4buj7i54dm3m5t3lsm46pd6dxpuiqgsojn4
  tests/test_handlers.py: bafybeihivq2v6v7rwcduelcemp6iilto7dgoudx7rdp7xkfczogxzszvwe
  tests/test_payloads.py: bafybeiakizgopiyuxfkv76smok5772xh6kmjkkgh33patswgaokjxaer6q
  utils/__init__.py: bafybeih6ozar7jjdbkkawjma5bernjmfy7ly4sweg5nc2mid6pwgcd74ui
  utils/nevermined.py: bafybeihe5lwqcqltliogxijeaawrgt5br4fxceyif6rwlthuguuspl3ani
  utils/scaling.py: bafybeif33hyxc4n6ph4vgmrqgzh3gf7wabpiixkyp3ii2vjcu3kycsxw7q
fingerprint_ignore_patterns: []
connections:
- valory/http_server:0.22.0:bafybeihpgu56ovmq4npazdbh6y6ru5i7zuv6wvdglpxavsckyih56smu7m
contracts:
- valory/gnosis_safe:0.1.0:bafybeidcb25wneezfd2iaiqa7ygxlimwwacvycahhenvpw7tdvwdigllzm
- valory/market_maker:0.1.0:bafybeibuk5tf6jfuiolk7u7dw3v6ilh3wn7imghw7ajvecrqlyx2w7vhca
- valory/erc20:0.1.0:bafybeia7a7mfjeok4ywpmejz74msofagagcentsudqxfojadmxlur5qolu
- valory/multisend:0.1.0:bafybeig5byt5urg2d2bsecufxe5ql7f4mezg3mekfleeh32nmuusx66p4y
- valory/mech:0.1.0:bafybeidwpijhdwj5abewa44k3tzxuanxykzmgnnffeq7re2rxp7pqbd2ou
- valory/conditional_tokens:0.1.0:bafybeihf2cfo2vt6kflur37zf2zzcdhduihmvfk7htgtjoqe5orkta4jly
- valory/realitio:0.1.0:bafybeih4tqkkphyezfxlivsdun5cshpmejxd23ypsboitgs4imeaqbc5m4
- valory/realitio_proxy:0.1.0:bafybeihd6gnzeaix7466bl6fihmpgiadolovaqyk75owmhjj35sr7ro2ei
- valory/agent_registry:0.1.0:bafybeig463a34ds2573dlhgkkfmbtu7xshololtieyh4m3b7hoa55qqhlu
- valory/transfer_nft_condition:0.1.0:bafybeiavxdx45h2rplnbq23feqejmrnn2cxispttim6hxoezwk6dt4c7iq
protocols:
- valory/contract_api:1.0.0:bafybeidgu7o5llh26xp3u3ebq3yluull5lupiyeu6iooi2xyymdrgnzq5i
- valory/ledger_api:1.0.0:bafybeihdk6psr4guxmbcrc26jr2cbgzpd5aljkqvpwo64bvaz7tdti2oni
- valory/ipfs:0.1.0:bafybeiftxi2qhreewgsc5wevogi7yc5g6hbcbo4uiuaibauhv3nhfcdtvm
- valory/http:1.0.0:bafybeifugzl63kfdmwrxwphrnrhj7bn6iruxieme3a4ntzejf6kmtuwmae
skills:
- valory/abstract_round_abci:0.1.0:bafybeiar2yhzxacfe3qqamqhaihtlcimquwedffctw55sowx6rac3cm3ui
- valory/market_manager_abci:0.1.0:bafybeictr7eonyvbdkzwrfg4cpabjcahy3oidefz7f3asppfvznwlbwema
- valory/transaction_settlement_abci:0.1.0:bafybeic3tccdjypuge2lewtlgprwkbb53lhgsgn7oiwzyrcrrptrbeyote
- valory/mech_interact_abci:0.1.0:bafybeih2cck5xu6yaibomwtm5zbcp6llghr3ighdnk56fzwu3ihu5xx35e
behaviours:
  main:
    args: {}
    class_name: AgentDecisionMakerRoundBehaviour
handlers:
  abci:
    args: {}
    class_name: ABCIHandler
  contract_api:
    args: {}
    class_name: ContractApiHandler
  http:
    args: {}
    class_name: HttpHandler
  ipfs:
    args: {}
    class_name: IpfsHandler
  ledger_api:
    args: {}
    class_name: LedgerApiHandler
  signing:
    args: {}
    class_name: SigningHandler
  tendermint:
    args: {}
    class_name: TendermintHandler
models:
  abci_dialogues:
    args: {}
    class_name: AbciDialogues
  benchmark_tool:
    args:
      log_dir: /logs
    class_name: BenchmarkTool
  contract_api_dialogues:
    args: {}
    class_name: ContractApiDialogues
  http_dialogues:
    args: {}
    class_name: HttpDialogues
  ipfs_dialogues:
    args: {}
    class_name: IpfsDialogues
  ledger_api_dialogues:
    args: {}
    class_name: LedgerApiDialogues
  params:
    args:
      cleanup_history_depth: 1
      cleanup_history_depth_current: null
      drand_public_key: 868f005eb8e6e4ca0a47c8a77ceaa5309a47978a7c71bc5cce96366b5d7a569937c529eeda66c7293784a9402801af31
      genesis_config:
        genesis_time: '2022-05-20T16:00:21.735122717Z'
        chain_id: chain-c4daS1
        consensus_params:
          block:
            max_bytes: '22020096'
            max_gas: '-1'
            time_iota_ms: '1000'
          evidence:
            max_age_num_blocks: '100000'
            max_age_duration: '172800000000000'
            max_bytes: '1048576'
          validator:
            pub_key_types:
            - ed25519
          version: {}
        voting_power: '10'
      keeper_timeout: 30.0
      max_attempts: 10
      max_healthcheck: 120
      multisend_address: '0x0000000000000000000000000000000000000000'
      multisend_batch_size: 1
      on_chain_service_id: null
      request_retry_delay: 1.0
      request_timeout: 10.0
      reset_pause_duration: 10
      reset_tendermint_after: 2
      retry_attempts: 400
      retry_timeout: 3
      round_timeout_seconds: 350.0
      service_id: decision_maker
      service_registry_address: null
      agent_registry_address: '0x0000000000000000000000000000000000000000'
      setup:
        all_participants:
        - '0x0000000000000000000000000000000000000000'
        safe_contract_address: '0x0000000000000000000000000000000000000000'
        consensus_threshold: null
      share_tm_config_on_startup: false
      sleep_time: 1
      use_slashing: false
      slash_cooldown_hours: 3
      slash_threshold_amount: 10000000000000000
      light_slash_unit_amount: 5000000000000000
      serious_slash_unit_amount: 8000000000000000
      tendermint_check_sleep_delay: 3
      tendermint_com_url: http://localhost:8080
      tendermint_max_retries: 5
      tendermint_p2p_url: localhost:26656
      tendermint_url: http://localhost:26657
      tx_timeout: 10.0
      use_termination: false
      mech_contract_address: '0x77af31de935740567cf4ff1986d04b2c964a786a'
      mech_request_price: null
      mech_chain_id: gnosis
      mech_wrapped_native_token_address: '0xe91D153E0b41518A2Ce8Dd3D7944Fa863463a97d'
      mech_interaction_sleep_time: 10
      creator_per_subgraph:
        omen_subgraph: []
      slot_count: 2
      opening_margin: 300
      languages:
      - en_US
      average_block_time: 5
      abt_error_mult: 5
      the_graph_error_message_key: message
      the_graph_payment_required_error: payment required for subsequent requests for
        this API key
      sample_bets_closing_days: 10
      trading_strategy: strategy_name
      use_fallback_strategy: true
      bet_threshold: 100000000000000000
      blacklisting_duration: 3600
      ipfs_address: https://gateway.autonolas.tech/ipfs/
      tools_accuracy_hash: QmR8etyW3TPFadNtNrW54vfnFqmh8vBrMARWV76EmxCZyk
      prompt_template: With the given question "@{question}" and the `yes` option
        represented by `@{yes}` and the `no` option represented by `@{no}`, what are
        the respective probabilities of `p_yes` and `p_no` occurring?
      dust_threshold: 10000000000000
      conditional_tokens_address: '0xCeAfDD6bc0bEF976fdCd1112955828E00543c0Ce'
      realitio_proxy_address: '0xAB16D643bA051C11962DA645f74632d3130c81E2'
      realitio_address: '0x79e32aE03fb27B07C89c0c568F80287C01ca2E57'
      redeem_round_timeout: 3600.0
      event_filtering_batch_size: 5000
      reduce_factor: 0.25
      max_filtering_retries: 6
      minimum_batch_size: 500
      redeeming_batch_size: 5
      store_path: data
      slippage: 0.01
      policy_epsilon: 0.1
      use_subgraph_for_redeeming: true
      use_nevermined: true
      mech_to_subscription_params:
      - - base_url
        - https://marketplace-api.gnosis.nevermined.app/api/v1/metadata/assets/ddo
      - - did
        - did:nv:0ea01d5de3b34e3792db825f2a5f5595c393c68b19fd5efdacd00fcc63a53483
      - - escrow_payment_condition_address
        - '0x9dDC4F1Ea5b94C138A23b60EC48c0d01d172629a'
      - - lock_payment_condition_address
        - '0xDE85A368Ee6f374d236500d176814365370778dA'
      - - transfer_nft_condition_address
        - '0xbBa4A25262745a55f020D0a3E9a82c25bb6F4979'
      - - token_address
        - '0xa30DE8C6aC39B825192e5F1FADe0770332D279A8'
      - - order_address
        - '0xc7751eff5396a846e7bc83ac31d3cb7d37cb49e4'
      - - nft_amount
        - '100'
      - - payment_token
        - '0x0000000000000000000000000000000000000000'
      - - order_address
        - '0xc7751eff5396a846e7bc83ac31d3cb7d37cb49e4'
      - - price
        - '1000000000000000000'
      irrelevant_tools:
      - openai-text-davinci-002
      - openai-text-davinci-003
      - openai-gpt-3.5-turbo
      - openai-gpt-4
      - stabilityai-stable-diffusion-v1-5
      - stabilityai-stable-diffusion-xl-beta-v2-2-2
      - stabilityai-stable-diffusion-512-v2-1
      - stabilityai-stable-diffusion-768-v2-1
      tool_punishment_multiplier: 1
      contract_timeout: 300.0
      file_hash_to_strategies_json:
      - - hash
        - - strategy_name
      strategies_kwargs:
      - - bet_kelly_fraction
        - 1.0
      - - floor_balance
        - 500000000000000000
      - - bet_amount_per_threshold
        - 0.0: 0
          0.1: 0
          0.2: 0
          0.3: 0
          0.4: 0
          0.5: 0
          0.6: 0
          0.7: 0
          0.8: 0
          0.9: 0
          1.0: 0
      service_endpoint: trader.staging.autonolas.tech/
      rpc_sleep_time: 10
    class_name: DecisionMakerParams
  benchmarking_mode:
    args:
      enabled: false
      native_balance: 10000000000000000000
      collateral_balance: 10000000000000000000
      mech_cost: 10000000000000000
      pool_fee: 20000000000000000
      outcome_token_amounts:
      - 11000000000000000000
      - 9000000000000000000
      outcome_token_marginal_prices:
      - 0.4
      - 0.6
      sep: ','
      dataset_filename: benchmark_data.csv
      question_field: question
      question_id_field: question_id
      answer_field: answer
      p_yes_field_part: p_yes_
      p_no_field_part: p_no_
      confidence_field_part: confidence_
      part_prefix_mode: true
      bet_amount_field: collateral_amount
      results_filename: benchmarking_results.csv
      randomness: benchmarking_randomness
    class_name: BenchmarkingMode
  acc_info_fields:
    args:
      tool: tool
      requests: total_requests
      accuracy: tool_accuracy
      sep: ','
    class_name: AccuracyInfoFields
  trades_subgraph:
    args:
      api_id: trades
      headers:
        Content-Type: application/json
      method: POST
      parameters: {}
      response_key: data:fpmmTrades
      response_type: list
      error_key: errors
      error_index: 0
      error_type: dict
      retries: 5
      url: https://api.thegraph.com/subgraphs/name/protofire/omen-xdai
    class_name: TradesSubgraph
  conditional_tokens_subgraph:
    args:
      api_id: conditional_tokens
      headers:
        Content-Type: application/json
      method: POST
      parameters: {}
      response_key: data:user:userPositions
      response_type: list
      error_key: errors
      error_index: 0
      error_type: dict
      retries: 5
      url: https://api.thegraph.com/subgraphs/name/gnosis/conditional-tokens-gc
    class_name: ConditionalTokensSubgraph
  realitio_subgraph:
    args:
      api_id: realitio
      headers:
        Content-Type: application/json
      method: POST
      parameters: {}
      response_key: data:answers
      response_type: list
      error_key: errors
      error_index: 0
      error_type: dict
      retries: 5
      url: https://api.thegraph.com/subgraphs/name/realityeth/realityeth-gnosis
    class_name: RealitioSubgraph
  agent_tools:
    args:
      api_id: agent_tools
      headers:
        Content-Type: application/json
      method: GET
      parameters: {}
      response_key: tools
      response_type: list
      retries: 5
      url: ''
    class_name: AgentToolsSpecs
  requests:
    args: {}
    class_name: Requests
  signing_dialogues:
    args: {}
    class_name: SigningDialogues
  state:
    args: {}
    class_name: SharedState
  tendermint_dialogues:
    args: {}
    class_name: TendermintDialogues
dependencies:
  hexbytes:
    version: ==0.3.1
  hypothesis:
    version: ==6.21.6
  py-multibase:
    version: ==1.0.3
  py-multicodec:
    version: ==0.2.1
  web3:
    version: <7,>=6.0.0
  eth-abi:
    version: ==4.0.0
  pyyaml:
    version: <=6.0.1,>=3.10
is_abstract: true
